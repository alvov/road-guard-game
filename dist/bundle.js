!function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="dist/",e(e.s=9)}([function(t,e,i){"use strict";i.d(e,"_7",function(){return r}),i.d(e,"h",function(){return n}),i.d(e,"g",function(){return a}),i.d(e,"_1",function(){return s}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return h}),i.d(e,"_2",function(){return u}),i.d(e,"_5",function(){return l}),i.d(e,"_6",function(){return c}),i.d(e,"_4",function(){return d}),i.d(e,"_3",function(){return g}),i.d(e,"S",function(){return f}),i.d(e,"R",function(){return p}),i.d(e,"i",function(){return m}),i.d(e,"j",function(){return y}),i.d(e,"e",function(){return v}),i.d(e,"d",function(){return b}),i.d(e,"W",function(){return w}),i.d(e,"U",function(){return T}),i.d(e,"Y",function(){return x}),i.d(e,"V",function(){return k}),i.d(e,"Z",function(){return O}),i.d(e,"_0",function(){return j}),i.d(e,"T",function(){return C}),i.d(e,"X",function(){return S}),i.d(e,"o",function(){return P}),i.d(e,"t",function(){return R}),i.d(e,"u",function(){return A}),i.d(e,"r",function(){return E}),i.d(e,"q",function(){return L}),i.d(e,"s",function(){return _}),i.d(e,"p",function(){return F}),i.d(e,"N",function(){return B}),i.d(e,"O",function(){return M}),i.d(e,"P",function(){return G}),i.d(e,"Q",function(){return N}),i.d(e,"I",function(){return W}),i.d(e,"L",function(){return I}),i.d(e,"J",function(){return H}),i.d(e,"K",function(){return D}),i.d(e,"M",function(){return K}),i.d(e,"l",function(){return Y}),i.d(e,"w",function(){return q}),i.d(e,"z",function(){return z}),i.d(e,"B",function(){return U}),i.d(e,"y",function(){return V}),i.d(e,"A",function(){return X}),i.d(e,"v",function(){return Q}),i.d(e,"x",function(){return J}),i.d(e,"n",function(){return Z}),i.d(e,"m",function(){return $}),i.d(e,"G",function(){return tt}),i.d(e,"E",function(){return et}),i.d(e,"H",function(){return it}),i.d(e,"F",function(){return rt}),i.d(e,"D",function(){return nt}),i.d(e,"C",function(){return at}),i.d(e,"f",function(){return st}),i.d(e,"a",function(){return ot}),i.d(e,"k",function(){return ht}),i.d(e,"_8",function(){return ut}),i.d(e,"_9",function(){return lt});var r=10,n={RED:"#F23B3B",YELLOW:"#FFFF00",GREEN:"#72C636",MAROON:"#800000",STEEL:"#AAB0B6",SPACE_GREY:"#252525",MIDNIGHT_BLUE:"#191970",FLORAL_WHITE:"#FFFAF0",RADAR_SCREEN:"#B2B7B1",RADAR_SCREEN_RED:"#DDAAAA",ROAD:"#45454A",GRASS:"#517F30",SKY1:"#87CEFA",SKY2:"#FFBF63",SKY3:"#FF729D",SKY4:"#5255bc",CAR_WINDOWS:"#778899",CAR_LIGHTS1:"#FCFF9F",CAR_LIGHTS2:"#F2FCFF",MAIN:"#312162"},a=Object.keys(n).reduce(function(t,e){return t[e]=Phaser.Color.hexToRGB(n[e]),t},{}),s=[[a.SKY1,1],[a.SKY2,.8],[a.SKY3,.6],[a.SKY4,.4],[0,0]],o=[a.SPACE_GREY,a.MAROON,a.STEEL,a.MIDNIGHT_BLUE,a.FLORAL_WHITE],h=[a.CAR_LIGHTS1,a.CAR_LIGHTS2],u="boot",l="loading",c="menu",d="howTo",g="game",f="ru",p="en",m="timeOut",y="win",v="normal",b="fined",w="empty",T="computing",x="fine",k="dismiss",O="fined",j="rogue",C="alreadyFined",S="error",P="gameTitle",R="menuBack",A="menuHowTo",E="howToGoal",L="howToFine",_="howToSpacebar",F="howToAuth",B="uiLevel",M="uiLoading",G="uiPause",N="uiVer",W="uiBtnFine",I="uiBtnQuit",H="uiBtnNext",D="uiBtnPlay",K="uiBtnReplay",Y="currency",q="radarEmpty",z="radarMetrics",U="radarWait",V="radarFined",X="radarRogue",Q="radarAlreadyFined",J="radarError",Z="endWin",$="endLoose",tt="statsTime",et="statsFines",it="statsWrong",rt="statsMissed",nt="rulesGoal",at="rulesAuth",st=200,ot=["A","B","C","E","H","K","M","O","P","T","X"],ht=[[20,0,50],[40,500,30],[60,1500,10],[80,2500,8],[100,5e3,2]],ut="fog",lt="thunder"},function(t,e,i){"use strict";function r(t){return String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0")}function n(t,e){var i=t<0;t=String(Math.abs(t));for(var r="",n=0;n<t.length;n++)n%3==0&&(r=" "+r),r=t.charAt(t.length-n-1)+r;return(i?"-":"")+r+e}function a(t,e){for(var i=0,r=0;r<o.k.length;r++){var n=h(o.k[r],2),a=n[0],s=n[1];if(t<a+e){i=s;break}}return i}function s(t,e,i){var r=Phaser.Color.getRGB(t),n=Phaser.Color.getRGB(e),a=(n.red-r.red)*i+r.red,s=(n.green-r.green)*i+r.green,o=(n.blue-r.blue)*i+r.blue;return Phaser.Color.getColor(a,s,o)}e.c=r,e.b=n,e.a=a,e.d=s;var o=i(0),h=function(){function t(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=i(31),s=i(0),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function(){function t(e){var i=e.game,r=e.name,h=e.rogueSeries,u=e.onKill,l=e.spriteKey,c=e.plateNumberPosition,d=e.rogueSignsPosition;n(this,t),this.game=i,this.rogueSeries=h,this.onKill=u,this.sprite=this.game.add.sprite(0,0,l,0),this.sprite.anchor.set(.5,1),this.sprite.name=r,this.sprite.rg=this,this.sprite.inputEnabled=!0,this.sprite.kill(),this.detailsSprite=this.game.add.sprite(-this.sprite.width/2,-this.sprite.height,l,1),this.sprite.addChild(this.detailsSprite),this.lightsSprite=this.game.add.sprite(-this.sprite.width/2,-this.sprite.height,l,2),this.sprite.addChild(this.lightsSprite),this.rogueSignsPosition=d,this.rogueSignSprite=this.game.add.sprite(0,0,"rogueSigns"),this.rogueSignSprite.anchor.set(0,1),this.sprite.addChild(this.rogueSignSprite),this.position=new Phaser.Point(0,0),this.velocity=new Phaser.Point(0,0),this.steeringTween=null,this.roadLane=null,this.color=null,this.isRogue=!1,this.dayTime=null,this.rogueFinedTimer=this.game.time.create(!1),this.plateNumber=new a.a(o({game:this.game},c,this.plateNumber)),this.sprite.addChild(this.plateNumber.group),this.mode=s.e}return h(t,[{key:"preUpdate",value:function(){this.position.add(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed)}},{key:"update",value:function(t){var e=t.x,i=t.y,r=t.scale,n=t.dayTime;this.sprite.position.set(e,i),this.sprite.scale.set(r),this.rogueFinedTimer.running&&(this.sprite.tint=Math.floor(this.rogueFinedTimer.ms/400)%2?this.color:s.g.RED),void 0!==n&&n!==this.dayTime&&(this.dayTime=n,this.setTint())}},{key:"handleRogueFinedTimerComplete",value:function(){this.rogueFinedTimer.stop(),this.sprite.tint=this.color}},{key:"setMode",value:function(t){switch(t){case s.d:this.isRogue&&(this.rogueFinedTimer.add(3200,this.handleRogueFinedTimerComplete,this),this.rogueFinedTimer.start())}this.mode=t}},{key:"moveToY",value:function(t,e){this.roadLane=e,this.steeringTween&&this.steeringTween.stop(),this.steeringTween=this.game.add.tween(this.position).to({y:t},600,Phaser.Easing.Quadratic.InOut,!0)}},{key:"generatePlateNumber",value:function(){var t="",e="";if(this.isRogue)t=this.game.rnd.pick(this.rogueSeries),e=String(this.game.rnd.integerInRange(0,9)).repeat(3);else for(var i=0;i<3;i++)t+=this.game.rnd.pick(s.a),e+=String(this.game.rnd.integerInRange(0,9));return{letters:t,numbers:e}}},{key:"generateBodyColor",value:function(){return this.isRogue?s.b[0]:this.game.rnd.pick(s.b)}},{key:"setTint",value:function(){var t=this,e=255*this.dayTime,i=Phaser.Color.getColor(e,e,e),r=Phaser.Color.getRGB(this.color);this.sprite.tint=Phaser.Color.RGBArrayToHex([r.r,r.g,r.b].map(function(e){return e*t.dayTime/255})),this.rogueSignSprite.tint=i,this.detailsSprite.tint=i,this.plateNumber.plateGraphics.tint=i}},{key:"revive",value:function(t){var e=t.x,i=t.y,n=t.roadLane,a=t.speed,o=t.isRogue,h=t.dayTime;if(this.setMode(s.e),this.dayTime=h,this.isRogue=o,this.rogueSignSprite.visible=!1,this.isRogue){var u=Object.keys(this.rogueSignsPosition),l=this.game.rnd.integerInRange(0,2*u.length);if(l<u.length){var c;this.rogueSignSprite.frame=l,(c=this.rogueSignSprite.position).set.apply(c,r(this.rogueSignsPosition[u[l]])),this.rogueSignSprite.visible=!0}}this.plateNumber.setText(this.generatePlateNumber()),this.position.set(e,i),this.roadLane=n,this.velocity.x=a,this.lightsSprite.tint=this.game.rnd.pick(s.c),this.color=this.generateBodyColor(),void 0!==this.dayTime?this.setTint():this.sprite.tint=this.color,this.sprite.revive()}},{key:"kill",value:function(){this.sprite.kill(),this.onKill(this)}}]),t}();e.a=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(24),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(){function t(){r(this,t),this.lsAvailable=t.lsAvailable(),this.count=Object.keys(n.a).length}return a(t,[{key:"maxLevel",get:function(){if(this.lsAvailable){var t=window.localStorage.getItem("_rgml");if(!isNaN(Number(t)))return Math.max(1,Math.min(this.count,t))}return 1},set:function(t){this.lsAvailable&&t>this.maxLevel&&window.localStorage.setItem("_rgml",t)}}],[{key:"lsAvailable",value:function(){var t="rg_tmp";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}},{key:"getLevelNumber",value:function(t){return Number(t.substr(5))}},{key:"getNextLevelId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"level0",i="level"+(t.getLevelNumber(e)+1);return n.a.hasOwnProperty(i)?i:null}},{key:"getLevelById",value:function(t){return null!==t&&n.a.hasOwnProperty(t)?n.a[t]:null}},{key:"getLevelByNumber",value:function(e){return t.getLevelById("level"+e)}},{key:"getNextLevelById",value:function(e){return t.getLevelById(t.getNextLevelId(e))}}]),t}();e.a=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(){function t(e){var i=e.game,n=e.name,a=e.x,s=e.y,o=e.width,h=e.height,u=e.bg,l=e.text,c=e.style,d=e.radius,g=void 0===d?h/3:d;r(this,t),this.group=i.add.group(),this.group.x=a,this.group.y=s,this.width=o,this.height=h,this.radius=g,this.initialBg=u,this.initialFontStyle=c||{font:h/2+"px Arial",fill:"#fff"},this.initialText=l,this.buttonGraphics=i.add.graphics(),this.buttonGraphics.name=n,this.buttonGraphics.inputEnabled=!0,this.buttonGraphics.input.useHandCursor=!0,this.group.add(this.buttonGraphics),this.quitButtonText=i.add.text(o/2,h/2+h/13),this.quitButtonText.anchor.set(.5),this.group.add(this.quitButtonText),this.reset()}return a(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bg,i=t.style,r=t.text;void 0!==r&&this.quitButtonText.setText(r),i&&this.quitButtonText.setStyle(n({},this.initialFontStyle,i)),void 0!==e&&this.drawGraphics({bg:e})}},{key:"reset",value:function(){this.update({bg:this.initialBg,style:{},text:this.initialText})}},{key:"drawGraphics",value:function(t){var e=t.bg;this.buttonGraphics.beginFill(e),this.buttonGraphics.drawRoundedRect(0,0,this.width,this.height,this.radius),this.buttonGraphics.endFill()}}]),t}();e.a=s},function(t,e,i){"use strict";var r={initial:[{type:"spritesheet",key:"langButtons",url:i(12),frameWidth:50,frameHeight:50},{type:"spritesheet",key:"levels",url:i(13),frameWidth:100,frameHeight:100}],game:[{type:"image",key:"ground",url:i(14),overwrite:!1},{type:"image",key:"rain",url:i(15),overwrite:!1},{type:"spritesheet",key:"roadSign",url:i(16),frameWidth:60,frameHeight:140},{type:"spritesheet",key:"car01",url:i(17),frameWidth:152,frameHeight:102},{type:"spritesheet",key:"car02",url:i(18),frameWidth:150,frameHeight:141},{type:"spritesheet",key:"car03",url:i(19),frameWidth:152,frameHeight:103},{type:"spritesheet",key:"car04",url:i(20),frameWidth:156,frameHeight:136},{type:"spritesheet",key:"rogueSigns",url:i(21),frameWidth:11,frameHeight:12}]};e.a=JSON.stringify(r)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e){var i=e.game,n=e.x,a=e.y,s=e.width,o=e.height,h=e.color,u=e.radius,l=void 0===u?0:u;r(this,t),this.game=i,this.x=n,this.y=a,this.width=s,this.height=o,this.radius=l,this.color=h,this.graphics=this.game.add.graphics()}return n(t,[{key:"update",value:function(t){var e=t.percent,i=t.color,r=void 0===i?this.color:i;e=this.game.math.clamp(e,0,1),this.graphics.clear(),this.graphics.lineStyle(1,r),0===this.radius?this.graphics.drawRect(this.x,this.y,this.width,this.height):this.graphics.drawRoundedRect(this.x,this.y,this.width,this.height,this.radius),this.graphics.beginFill(r),this.graphics.drawRoundedRect(this.x,this.y,this.width*e,this.height,this.radius),this.graphics.endFill()}}]),t}();e.a=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=200,s=function(){function t(e){var i=e.game,n=e.height;r(this,t),this.game=i,this.leftOffset=this.game.width/15,this.width=this.game.width-2*this.leftOffset,this.height=n,this.topOffset=(this.game.height-n)/2,this.group=this.game.add.group(),this.group.x=this.leftOffset,this.group.y=this.topOffset,this.overlay=this.game.add.graphics(),this.overlay.beginFill(16777215),this.overlay.drawRoundedRect(0,0,this.width,this.height,20),this.overlay.endFill(),this.overlay.scale.set(0),this.group.add(this.overlay),this.overlayTween=this.game.add.tween(this.overlay.scale).to({x:1,y:1},a),this.contentGroup=this.game.add.group(),this.group.add(this.contentGroup),this.hide()}return n(t,[{key:"handleOverlayTweenComplete",value:function(){this.contentGroup.visible=!0}},{key:"show",value:function(){for(var t,e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];(t=this.overlayTween.onComplete).addOnce.apply(t,[this.handleOverlayTweenComplete,this,0].concat(i)),this.overlayTween.start(),this.overlay.visible=!0}},{key:"hide",value:function(){this.overlay.visible=!1,this.contentGroup.visible=!1}}]),t}();e.a=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},a=function(){function t(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){var i=e.game,n=e.x,a=e.y,s=e.style,o=void 0===s?{}:s,h=e.lineSpacing,u=e.columnSpacing;r(this,t),this.game=i,this.group=this.game.add.group(),this.group.x=n,this.group.y=a,this.style=o,this.lineSpacing=h,this.columnSpacing=u}return s(t,[{key:"setText",value:function(t){var e=this;this.group.removeAll();var i=0,r=0;t.forEach(function(t,n){var s=a(t,1),o=a(s[0],2),h=o[0],u=o[1],l=e.createTextLine(0,r,h,u);l.width>i&&(i=l.width),r+=l.height+e.lineSpacing,e.group.addChild(l)}),i+=this.columnSpacing,r=0,t.forEach(function(t,n){var s=a(t,2),o=(s[0],a(s[1],2)),h=o[0],u=o[1],l=e.createTextLine(i,r,h,u);r+=l.height+e.lineSpacing,e.group.addChild(l)})}},{key:"createTextLine",value:function(t,e,i,r){var a=n({},this.style);return r&&(a.fill=r),this.game.add.text(t,e,i,a)}}]),t}();e.a=o},function(t,e,i){"use strict";function r(){var t=rgResizeBody(),e=c(t,2),i=e[0],r=e[1],n=new Phaser.Game({width:i,height:r,parent:g,antialias:!0,renderer:Phaser.CANVAS});n.state.add(l._2,a.a),n.state.add(l._5,s.a),n.state.add(l._6,o.a),n.state.add(l._4,h.a),n.state.add(l._3,u.a),n.state.start(l._2)}Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),a=(i.n(n),i(11)),s=i(25),o=i(26),h=i(27),u=i(28),l=i(0),c=function(){function t(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.WebFontConfig={google:{families:["Press Start 2P:400:latin,cyrillic"]},active:function(){setTimeout(function(){r()},50)}};var d=document.createElement("script");d.src="dist/webfontloader.js",document.head.appendChild(d);var g=document.querySelector(".js-game-container");window.rgResizeBody=function(){var t=window.innerHeight;return document.body.clientHeight>t&&(document.body.style.height=t+"px",document.documentElement.style.height=t+"px"),[g.clientWidth,g.clientHeight]},document.body.style.backgroundImage="url("+i(45)+")"},function(t,e){},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=i(5),s=i(22),o=i(0),h=i(3),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function(){function t(){n(this,t)}return u(t,[{key:"init",value:function(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.rg={level:null,i18n:null}}},{key:"create",value:function(){this.state.onStateChange.add(this.handleStateChange,this),this.scale.onOrientationChange.add(this.handleOrientationChange,this),this.game.rg.level=new h.a,this.game.rg.i18n=new s.a({game:this.game}),this.state.start(o._5,!0,!1,{assets:[["pack","initial",null,a.a]],nextState:[o._6]})}},{key:"handleStateChange",value:function(){this.game.rg.i18n.clear()}},{key:"handleOrientationChange",value:function(t,e,i){var n=this;t.screenOrientation!==e&&t.screenOrientation.startsWith("landscape")&&setTimeout(function(){var t;(t=n.scale).setGameSize.apply(t,r(window.rgResizeBody()))},500)}}]),t}();e.a=l},function(t,e,i){t.exports=i.p+"assets/66dd3dd498c059b331146e5fe01f17dd.png"},function(t,e,i){t.exports=i.p+"assets/1556f8c110cb211e45185e04767590d7.png"},function(t,e,i){t.exports=i.p+"assets/1ba6b0551aff85ce5e09affdb9bbba1d.png"},function(t,e,i){t.exports=i.p+"assets/2664e616704ca8545da5897fbd66e2d7.png"},function(t,e,i){t.exports=i.p+"assets/75410de91275760b3ce7d204a47f2113.png"},function(t,e,i){t.exports=i.p+"assets/14638e58953f64d96decb915d8a34c3b.png"},function(t,e,i){t.exports=i.p+"assets/05db645981cb667641ac5de1b0286f22.png"},function(t,e,i){t.exports=i.p+"assets/f736f0af1913b2f803789b0bfe3468e3.png"},function(t,e,i){t.exports=i.p+"assets/f01cb41d9cd232620c23e3e86cf3998c.png"},function(t,e,i){t.exports=i.p+"assets/f2ffea272ee005bfe9b6c83c53aba816.png"},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(23),a=i(0),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){var i=e.game;r(this,t),this.game=i,this.textObjects=[],this.currentLang=navigator.language===a.S?a.S:a.R,this.translations=n.a}return s(t,[{key:"setLang",value:function(t){var e=this;this.currentLang=t,this.textObjects.forEach(function(t){var i=t.inst,r=t.text,n=t.postfix;i.setText(e.getTranslation(r)+n)})}},{key:"createText",value:function(t,e,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=this.game.add.text(t,e,this.getTranslation(i)+n,r);return this.textObjects.push({inst:a,text:i,postfix:n}),a}},{key:"getTranslation",value:function(t){return this.translations[t][this.currentLang]}},{key:"clear",value:function(){this.textObjects=[]}}]),t}();e.a=o},function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n,a=i(0);e.a=(n={},r(n,a.o,{en:"Road Guard",ru:"Дорожный Дозор"}),r(n,a.t,{en:"<   Back",ru:"<   Назад"}),r(n,a.u,{en:"How to play",ru:"Как играть"}),r(n,a.r,{en:"Reach the needed amount of issued fines (in rubles) before your shift ends.",ru:"Выполните норму по выписанным штрафам, пока не закончилась ваша смена."}),r(n,a.q,{en:"Choose a car on the road and press 'Fine!' if its speed is higher than allowed.",ru:"Выберите автомобиль из потока, и если его скорость окажется выше предельно допустимой, нажмите «Штраф!»"}),r(n,a.s,{en:"You can also use 'spacebar' key on your keyboard instead of the 'Fine!' button.",ru:"Вместо кнопки «Штраф!» можно нажимать на «Пробел» на клавиатуре."}),r(n,a.p,{en:"BE CAREFUL! Issuing fines to the cars of the authorities leads to your own penalty!",ru:"БУДЬТЕ ОСТОРОЖНЫ! Штрафы, выписанные «привилегированным» авто, вычтутся из вашей нормы!"}),r(n,a.N,{en:"Level",ru:"Уровень"}),r(n,a.O,{en:"Loading",ru:"Загрузка"}),r(n,a.P,{en:"Paused",ru:"Пауза"}),r(n,a.Q,{en:"ver.",ru:"вер."}),r(n,a.L,{en:"Quit",ru:"Выход"}),r(n,a.J,{en:"Next",ru:"Дальше"}),r(n,a.K,{en:"Play",ru:"Играть"}),r(n,a.M,{en:"Try again",ru:"Еще раз"}),r(n,a.I,{en:"FINE!",ru:"ШТРАФ!"}),r(n,a.l,{en:"rub.",ru:"руб."}),r(n,a.z,{en:"km/h",ru:"км/ч"}),r(n,a.w,{en:"POINT A CAR",ru:"УКАЖИТЕ МАШИНУ"}),r(n,a.B,{en:"wait...",ru:"ждите..."}),r(n,a.y,{en:"Fine",ru:"Штраф"}),r(n,a.A,{en:"AUTHORITY!",ru:"БЛАТНОЙ!"}),r(n,a.v,{en:"ALREADY FINED!",ru:"ШТРАФ ВЫПИСАН!"}),r(n,a.x,{en:"ERROR!",ru:"СБОЙ!"}),r(n,a.m,{en:"You lost!",ru:"Вы проиграли!"}),r(n,a.n,{en:"You won!",ru:"Вы выиграли!"}),r(n,a.D,{en:"Goal",ru:"Цель"}),r(n,a.C,{en:"Authorities",ru:"Блатные номера"}),r(n,a.G,{en:"Time",ru:"Время"}),r(n,a.E,{en:"Fines",ru:"Штрафов"}),r(n,a.H,{en:"Authorities",ru:"Блатных"}),r(n,a.F,{en:"Missed",ru:"Пропущено"}),n)},function(t,e,i){"use strict";var r=i(0);e.a={level1:{id:"level1",duration:180,goal:2e4,speed:{limit:40},road:{start:-100,end:1200,length:800,lanes:3,laneWidth:100},radar:{computing:1200},cars:{frequency:2,series:["AMP"],rogue:.1}},level2:{id:"level2",duration:180,goal:3e4,speed:{limit:60},road:{start:-100,end:1200,length:800,lanes:3,laneWidth:100},weather:r._9,radar:{computing:1e3},cars:{frequency:1.8,series:["AAA","AMP"],rogue:.1}},level3:{id:"level3",duration:180,goal:5e4,speed:{limit:80},road:{start:-100,end:1200,length:800,lanes:3,laneWidth:100},weather:r._8,radar:{computing:900},cars:{frequency:1.3,series:["AMP","EKX"],rogue:.15}},level4:{id:"level4",duration:180,goal:6e4,speed:{limit:100},road:{start:-100,end:1200,length:800,lanes:3,laneWidth:100},dayTime:.85,radar:{computing:900},cars:{frequency:1.1,series:["AAA","AMP","EKX"],rogue:.15}}}},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function n(t){return Array.isArray(t)?t:Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(0),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(){a(this,t)}return o(t,[{key:"init",value:function(t){this.rg={config:t,objects:{textProgress:null}}}},{key:"preload",value:function(){var t=this;this.game.stage.backgroundColor=s.h.MAIN,this.rg.config.assets.forEach(function(e){var i,a,s,o=n(e),h=o[0],u=o.slice(1);switch(h){case"pack":(i=t.load).pack.apply(i,r(u));break;case"spritesheet":(a=t.load).spritesheet.apply(a,r(u));break;case"image":(s=t.load).image.apply(s,r(u))}}),this.rg.objects.textLoading=this.game.add.text(this.game.world.centerX-5,this.game.world.centerY,this.game.rg.i18n.getTranslation(s.O),{font:"26px Arial",fill:"#fff"}),this.rg.objects.textLoading.anchor.set(1,.5),this.rg.objects.textProgress=this.game.add.text(this.game.world.centerX+5,this.game.world.centerY,"0 %",{font:"26px Arial",fill:"#fff"}),this.rg.objects.textProgress.anchor.set(0,.5)}},{key:"loadUpdate",value:function(){this.rg.objects.textProgress.setText(this.game.load.progress+" %")}},{key:"create",value:function(){this.state.start(this.rg.config.nextState[0],!0,!1,this.rg.config.nextState[1])}}]),t}();e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(3),a=i(5),s=i(0),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(){r(this,t)}return o(t,[{key:"preload",value:function(){this.game.stage.backgroundColor=s.h.MAIN}},{key:"create",value:function(){this.title=this.game.rg.i18n.createText(0,0,s.o,{fill:"#fff"}),this.title.anchor.set(.5);var t=this.game.rg.level.maxLevel;this.levelsGroup=this.game.add.group();for(var e=1;e<=this.game.rg.level.count;e++){var i=e>t,r=this.game.add.sprite(0,0,"levels",i?this.game.rg.level.count:e-1);r.name=i?"locked":"level"+e,i||(r.inputEnabled=!0,r.input.useHandCursor=!0),this.levelsGroup.add(r)}this.menuHowTo=this.game.rg.i18n.createText(0,0,s.u,{font:"22px Arial",fill:"#fff"}),this.menuHowTo.anchor.set(.5),this.menuHowTo.name=s.u,this.menuHowTo.inputEnabled=!0,this.menuHowTo.input.useHandCursor=!0,this.langButton=this.game.add.button(0,0,"langButtons",this.handleClickLang.bind(this)),this.versionText=this.game.rg.i18n.createText(0,0,s.Q,{font:'10px "Press Start 2P", Arial',fill:"#fff"},"1.0.0"),this.versionText.anchor.set(1,1),this.setObjectsPosition(),this.game.input.onDown.add(this.handleTap,this),this.scale.onSizeChange.add(this.setObjectsPosition,this)}},{key:"update",value:function(){this.langButton.frame=this.game.rg.i18n.currentLang===s.S?1:0}},{key:"shutdown",value:function(){this.game.input.onDown.remove(this.handleTap,this),this.scale.onSizeChange.remove(this.setObjectsPosition,this)}},{key:"handleTap",value:function(t){t.targetObject&&(t.targetObject.sprite.name.startsWith("level")?this.handleClickLevel(t.targetObject.sprite.name):t.targetObject.sprite.name===s.u&&this.handleClickHowTo())}},{key:"handleClickLevel",value:function(t){this.state.start(s._5,!0,!1,{assets:[["pack","game",null,a.a]],nextState:[s._3,n.a.getLevelById(t)]})}},{key:"handleClickHowTo",value:function(){this.state.start(s._4,!0,!1)}},{key:"handleClickLang",value:function(){this.game.rg.i18n.setLang(this.game.rg.i18n.currentLang===s.S?s.R:s.S)}},{key:"setObjectsPosition",value:function(){this.title.position.set(this.game.width/2,this.game.height/6),this.menuHowTo.position.set(this.game.width/2,5*this.game.height/6);var t=this.levelsGroup.getChildAt(0).height,e=(this.game.width-this.game.rg.level.count*t)/(this.game.rg.level.count+3);this.levelsGroup.x=2*e,this.levelsGroup.y=(this.game.height-t)/2;var i=0;this.levelsGroup.forEach(function(t){t.x=i*(t.width+e),i++}),this.langButton.position.set(s._7,0),this.versionText.position.set(this.game.width-s._7,this.game.height-s._7)}}]),t}();e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(0),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(){function t(){r(this,t)}return a(t,[{key:"preload",value:function(){this.game.stage.backgroundColor=n.h.MAIN}},{key:"create",value:function(){var t=this,e=this.game.width/15;this.back=this.game.add.text(e,this.game.height/15,this.game.rg.i18n.getTranslation(n.t),{fill:"#fff"}),this.back.inputEnabled=!0,this.back.input.useHandCursor=!0;var i=this.game.add.group(),r=0,a=this.game.height/30,s=Math.min(22,Math.round(this.game.height/19));[n.r,n.q,Phaser.Device.desktop?n.s:"",n.p].forEach(function(n,o){if(n){var h=t.game.add.text(e,r,o+1+". "+t.game.rg.i18n.getTranslation(n),{font:s+"px Arial",fill:"#fff",wordWrap:!0,wordWrapWidth:t.game.width-2*e});r+=h.height+a,i.add(h)}}),i.y=(this.game.height+this.back.bottom-r+a)/2,this.game.input.onDown.add(this.handleClickBack,this)}},{key:"handleClickBack",value:function(){if(this.back.getBounds().contains(this.game.input.x,this.game.input.y))return this.game.input.onDown.remove(this.handleClickBack,this),this.state.start(n._6,!0,!1),!0}}]),t}();e.a=s},function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=i(3),s=i(29),o=i(35),h=i(36),u=i(37),l=i(38),c=i(39),d=i(40),g=i(41),f=i(42),p=i(43),m=i(44),y=i(1),v=i(0),b=function(){function t(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},T=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),x=function(){function t(){n(this,t)}return T(t,[{key:"init",value:function(t){this.rg={level:t,levelStarted:!1,levelEnded:!1,dayTime:t.dayTime,stats:{fines:{count:0,sum:0},wrong:{count:0,sum:0},missed:{count:0,sum:0}},cars:{revive:!1,count:(t.road.end-t.road.start)/t.speed.limit/t.cars.frequency},objects:{sky:null,road:null,roadSign:null,weather:null,score:null,timer:null,radar:null},screens:{startLevel:null,endLevel:null},arrays:{cars:[]},groups:{bg:null,behindRoad:null,onRoad:null},timers:{reviveCar:null},input:{keys:{space:null}}}}},{key:"create",value:function(){this.rg.groups.bg=this.game.add.group(),this.rg.objects.sky=new m.a({game:this.game,height:this.game.height/5,dayTime:this.rg.dayTime}),this.rg.groups.bg.add(this.rg.objects.sky.graphics),this.rg.groups.behindRoad=this.game.add.group(),this.rg.objects.road=new o.a(w({game:this.game},this.rg.level.road,{height:this.game.height-this.rg.objects.sky.height})),this.rg.groups.onRoad=this.game.add.group();var t=this.rg.objects.road.length/2,e=-v._7;this.rg.objects.roadSign=new u.a(w({game:this.game,position:{x:t,y:e}},this.rg.objects.road.getProjection({x:this.rg.objects.road.length/2,y:-v._7}),{speedLimit:this.rg.level.speed.limit})),this.rg.groups.onRoad.add(this.rg.objects.roadSign.group),this.rg.level.weather&&(this.rg.objects.weather=new p.a({game:this.game,weather:this.rg.level.weather,road:this.rg.objects.road,bgGroup:this.rg.groups.bg,onFlash:this.handleFlash.bind(this)}),this.rg.groups.onRoad.addMultiple(this.rg.objects.weather.curtains)),this.rg.timers.reviveCar=this.game.time.create(!1),this.createCars(this.rg.cars.count),this.rg.objects.score=new l.a({game:this.game,x:v._7,y:v._7,goal:this.rg.level.goal}),this.rg.objects.timer=new c.a({game:this.game,duration:this.rg.level.duration}),this.rg.objects.radar=new h.a(w({game:this.game,x:v._7,y:this.game.height-v._7,width:this.rg.objects.road.roadOffsetLeft-2*v._7},this.rg.level.radar,{speedLimit:this.rg.level.speed.limit})),this.rg.screens.startLevel=new d.a({game:this.game,height:270}),this.rg.screens.startLevel.show({levelNumber:a.a.getLevelNumber(this.rg.level.id),goal:this.rg.level.goal,series:this.rg.level.cars.series}),this.rg.screens.endLevel=new g.a({game:this.game,height:4*this.game.height/5}),this.rg.objects.pause=new f.a({game:this.game}),this.game.onPause.add(this.handlePause,this),this.game.onResume.add(this.handlePause,this),this.game.input.onDown.add(this.handleTap,this),this.rg.input.keys.space=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)}},{key:"update",value:function(){if(this.rg.levelStarted){void 0!==this.rg.dayTime&&(this.rg.dayTime=this.rg.levelEnded?0:this.game.math.roundTo(this.rg.level.dayTime*(1-this.rg.objects.timer.elapsedPercent),-2),this.rg.dayTime=Math.max(.1,this.rg.dayTime),this.rg.objects.sky.update({dayTime:this.rg.dayTime}),this.rg.objects.road.update({dayTime:this.rg.dayTime}),this.rg.objects.roadSign.update({dayTime:this.rg.dayTime}));for(var t=this.rg.groups.onRoad.length-1;t>=0;t--){var e=this.rg.groups.onRoad.getChildAt(t);e.alive&&(e.name.startsWith("car")&&(this.updateCar(e.rg),e.rg.position.x>this.rg.level.road.end&&e.rg.kill()))}for(var i=this.rg.groups.behindRoad.length-1;i>=0;i--){var r=this.rg.groups.behindRoad.getChildAt(i);r.alive&&(this.updateCar(r.rg),r.rg.position.x>0&&this.rg.groups.onRoad.add(r))}this.rg.groups.behindRoad.customSort(this.sortRoadObjects,this),this.rg.groups.onRoad.customSort(this.sortRoadObjects,this),this.rg.cars.revive&&(this.rg.cars.revive=!this.reviveCar()),this.rg.objects.weather&&this.rg.objects.weather.update(),this.rg.objects.radar.update(),this.rg.objects.score.update(),this.rg.levelEnded||this.checkLevelEnd(),this.rg.input.keys.space.justDown&&this.rg.objects.radar.mode===v.Y&&this.handleFine()}}},{key:"updateCar",value:function(t){var e=this.getClearestRoadLaneByCar(t);e!==t.roadLane&&t.moveToY(this.rg.objects.road.getLaneCenter(e),e),t.preUpdate(),t.update(w({},this.rg.objects.road.getProjection(t.position),{dayTime:this.rg.dayTime}))}},{key:"render",value:function(){}},{key:"shutdown",value:function(){this.game.onPause.remove(this.handlePause,this),this.game.onResume.remove(this.handlePause,this),this.game.input.onDown.remove(this.handleTap,this),this.game.input.keyboard.removeKey(Phaser.Keyboard.SPACEBAR)}},{key:"handleTap",value:function(t){var e=void 0;t.targetObject&&(this.rg.levelEnded?t.targetObject.sprite.name===v.L?this.handleClickQuit():t.targetObject.sprite.name===v.J?this.handleClickNext():t.targetObject.sprite.name===v.M&&this.handleClickReplay():t.targetObject.sprite.name.startsWith("car")?(this.handleClickCar(t.targetObject.sprite.rg),e=!0):t.targetObject.sprite.name===v.I?this.rg.objects.radar.mode===v.Y&&(this.handleFine(),e=!0):t.targetObject.sprite.name===v.K?(this.startLevel(),e=!0):t.targetObject.sprite.name===v.L?this.handleClickQuit():t.targetObject.sprite.name===v.P&&this.handlePause()),e||this.handleClickField()}},{key:"handleClickField",value:function(){this.rg.objects.radar.mode!==v.X&&this.rg.objects.radar.setMode(v.W)}},{key:"handleClickQuit",value:function(){this.state.start(v._6)}},{key:"handleClickNext",value:function(){this.state.start(v._3,!0,!1,a.a.getNextLevelById(this.rg.level.id))}},{key:"handleClickReplay",value:function(){this.state.start(v._3,!0,!1,a.a.getLevelById(this.rg.level.id))}},{key:"handleClickCar",value:function(t){this.rg.objects.radar.mode!==v.X&&(t.mode===v.d?this.rg.objects.radar.setMode(t.isRogue?v._0:v.T):this.rg.objects.radar.mode===v.U&&this.rg.objects.radar.currentCar===t||this.rg.objects.radar.setMode(v.U,{car:t}))}},{key:"handleKillCar",value:function(t){if(this.rg.groups.onRoad.removeChild(t.sprite),t===this.rg.objects.radar.currentCar&&this.rg.objects.radar.setMode(v.W),!this.rg.levelEnded&&t.mode!==v.d&&!t.isRogue){var e=Object(y.a)(t.velocity.x,this.rg.level.speed.limit);0!==e&&(this.rg.stats.missed.count++,this.rg.stats.missed.sum+=e)}}},{key:"handleFine",value:function(){var t=this.rg.objects.radar.currentCar;t.setMode(v.d),t.isRogue?(this.rg.stats.wrong.count++,this.rg.stats.wrong.sum-=this.rg.objects.radar.currentFine,this.rg.objects.score.updateValue(-this.rg.objects.radar.currentFine),this.rg.objects.radar.setMode(v._0)):(this.rg.stats.fines.count++,this.rg.stats.fines.sum+=this.rg.objects.radar.currentFine,this.rg.objects.score.updateValue(this.rg.objects.radar.currentFine),this.rg.objects.radar.setMode(v.Z))}},{key:"handleFlash",value:function(t){t?this.rg.objects.radar.setMode(v.X):this.rg.objects.radar.setMode(v.W)}},{key:"handlePause",value:function(){this.rg.levelEnded||(this.game.paused?this.rg.objects.pause.revive():this.rg.objects.pause.kill())}},{key:"checkLevelEnd",value:function(){this.rg.objects.timer.isExpired?this.endLevel(v.i):this.rg.objects.score.reachedGoal&&this.endLevel(v.j)}},{key:"startLevel",value:function(){this.rg.levelStarted=!0,this.rg.objects.timer.start(),this.resetCarTimer(),this.rg.objects.weather&&this.rg.objects.weather.startFlashTimers(),this.rg.screens.startLevel.hide()}},{key:"endLevel",value:function(t){this.rg.levelEnded=!0,this.rg.objects.timer.kill();var e=a.a.getNextLevelById(this.rg.level.id);e&&(this.game.rg.level.maxLevel=a.a.getLevelNumber(e.id)),this.rg.screens.endLevel.show({mode:t,stats:w({time:this.rg.objects.timer.secondsElapsed},this.rg.stats),nextLevel:e?e.id:null})}},{key:"resetCarTimer",value:function(){this.rg.cars.revive=!0,this.rg.timers.reviveCar.stop(!0),this.rg.timers.reviveCar.add(1e3*this.rg.level.cars.frequency+this.game.rnd.integerInRange(-1e3,1e3),this.resetCarTimer,this),this.rg.timers.reviveCar.start()}},{key:"createCars",value:function(t){for(var e=this,i=0;i<t;i++)!function(t){var i=e.game.rnd.integerInRange(0,100),r=0,n=s.a.find(function(t){var e=b(t,2),n=(e[0],e[1]);return r+=n,i<=r}),a=b(n,1),o=a[0],h=new o({game:e.game,name:"car"+t,rogueSeries:e.rg.level.cars.series,onKill:e.handleKillCar.bind(e)});e.rg.arrays.cars.push(h)}(i)}},{key:"reviveCar",value:function(){var t=this.rg.arrays.cars.find(function(t){return!t.sprite.alive});if(t){var e=this.game.rnd.integerInRange(0,this.rg.objects.road.lanes-1),i=this.game.rnd.frac()<this.rg.level.cars.rogue,r=this.getRandomCarSpeed(i);return t.revive({x:this.rg.level.road.start,y:this.rg.objects.road.getLaneCenter(e),roadLane:e,speed:r,isRogue:i,dayTime:this.rg.dayTime}),this.rg.groups.behindRoad.addAt(t.sprite,0),!0}return!1}},{key:"getClearestRoadLaneByCar",value:function(t){var e=r({},t.roadLane,1/0),i=this.rg.objects.road.getLaneCenter(t.roadLane),n=1;t.roadLane<this.rg.objects.road.lanes-1&&t.position.y>=i&&(e[t.roadLane+1]=1/0,n++),t.roadLane>0&&t.position.y<=i&&(e[t.roadLane-1]=1/0,n++);var a=0;if(t.position.x<0)for(var s=t.sprite.z+1;s<this.rg.groups.behindRoad.length;s++){var o=this.rg.groups.behindRoad.getChildAt(s),h=o.rg;if(!(!o.alive||t.velocity.x<h.velocity.x||Math.abs(h.position.y-t.position.y)>1)&&(e[h.roadLane]===1/0&&(e[h.roadLane]=h.position.x-t.position.x,++a===n)))return this.getClearestRoadLaneByObj(e,t.roadLane)}for(var u=t.position.x<0?0:t.sprite.z+1;u<this.rg.groups.onRoad.length;u++){var l=this.rg.groups.onRoad.getChildAt(u);if(l.alive&&l.name.startsWith("car")){var c=l.rg;if(!(t.velocity.x<c.velocity.x||Math.abs(c.roadLane-t.roadLane)>1)&&e[c.roadLane]===1/0&&(e[c.roadLane]=c.position.x-t.position.x,++a===n))return this.getClearestRoadLaneByObj(e,t.roadLane)}}return this.getClearestRoadLaneByObj(e,t.roadLane)}},{key:"getClearestRoadLaneByObj",value:function(t,e){var i=-1/0,r=[];e=String(e);var n=!1;for(var a in t)t.hasOwnProperty(a)&&(t[a]===i?(r.push(a),a===e&&(n=!0)):t[a]>i&&(i=t[a],r=[a],n=a===e));return n?Number(e):1===r.length?Number(r[0]):Number(this.game.rnd.pick(r))}},{key:"getRandomCarSpeed",value:function(t){if(t){var e=this.rg.level.speed.limit+v.k[1][0],i=this.rg.level.speed.limit+v.k[v.k.length-1][0];return this.game.rnd.integerInRange(e,i-1)}for(var r=this.game.rnd.integerInRange(1,100),n=0,a=0;a<v.k.length;a++){var s=b(v.k[a],3),o=s[0];s[1];if(n+=s[2],r<=n){var h=(v.k[a-1]||[0])[0];return this.rg.level.speed.limit+this.game.rnd.integerInRange(h,o-1)}}return this.rg.level.speed.limit}},{key:"sortRoadObjects",value:function(t,e){return t.rg.position.x-e.rg.position.x}}]),t}();e.a=x},function(t,e,i){"use strict";var r=i(30),n=i(32),a=i(33),s=i(34);e.a=[[r.a,40],[n.a,40],[a.a,10],[s.a,10]]},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(2),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},h=function(t){function e(t){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o({},t,{spriteKey:"car01",plateNumberPosition:{x:0,y:-13},rogueSignsPosition:{light:[22,-101],pass:[-43,-78]}})))}return a(e,t),e}(s.a);e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=54,s=14,o=function(){function t(e){var i=e.game,n=e.x,o=e.y,h=e.width,u=void 0===h?a:h,l=e.height,c=void 0===l?s:l;r(this,t),this.game=i,this.group=this.game.add.group(),this.group.x=n-u/2,this.group.y=o,this.letters="",this.numbers="",this.plateGraphics=this.game.add.graphics(),this.plateGraphics.beginFill(16777215),this.plateGraphics.drawRoundedRect(0,-c,u,c,2),this.plateGraphics.endFill(),this.group.add(this.plateGraphics),this.text=this.game.add.text(u/2,-c,"",{font:c-1+"px Arial",fontVariant:"small-caps",fill:"#000"}),this.text.anchor.set(.5,0),this.text.cacheAsBitmap=!0,this.group.add(this.text)}return n(t,[{key:"setText",value:function(t){var e=t.letters,i=t.numbers;this.letters=e,this.numbers=i,this.text.setText(this.getText(".")),this.text.addColor("rgba(255,255,255,0)",1),this.text.addColor("#000",2),this.text.addColor("rgba(255,255,255,0)",5),this.text.addColor("#000",6),this.text.updateCache()}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[this.letters[0].toLowerCase(),this.numbers,this.letters.substr(1).toLowerCase()].join(t)}}]),t}();e.a=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(2),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},h=function(t){function e(t){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o({},t,{spriteKey:"car03",plateNumberPosition:{x:0,y:-22},rogueSignsPosition:{light:[22,-103],pass:[-49,-77]}})))}return a(e,t),e}(s.a);e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(2),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},h=function(t){function e(t){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o({},t,{spriteKey:"car02",plateNumberPosition:{x:0,y:-40},rogueSignsPosition:{light:[23,-140],pass:[-45,-103]}})))}return a(e,t),e}(s.a);e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(2),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},h=function(t){function e(t){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o({},t,{spriteKey:"car04",plateNumberPosition:{x:0,y:-36},rogueSignsPosition:{light:[20,-132],pass:[-52,-99]}})))}return a(e,t),e}(s.a);e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(0),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(){function t(e){var i=e.game,a=e.length,s=e.lanes,o=e.laneWidth,h=e.height;r(this,t),this.game=i,this.length=a,this.lanes=s,this.laneWidth=o,this.width=this.laneWidth*this.lanes,this.dayTime=null,this.group=this.game.add.group(),this.groundHeight=h,this.groundTile=this.game.add.tileSprite(0,this.game.height-this.groundHeight,this.game.width,this.groundHeight,"ground"),this.group.add(this.groundTile),this.roadWidthTop=this.game.width/3,this.roadOffsetLeft=(this.game.width-this.roadWidthTop)/2,this.roadWidthBottom=(this.game.width-this.roadOffsetLeft)/(2*this.lanes-1)*(2*this.lanes),this.mainRatio=this.roadWidthBottom/this.roadWidthTop,this.topLeft=new Phaser.Point(this.roadOffsetLeft,this.game.height-this.groundHeight),this.roadGraphics=this.game.add.graphics(0,0,this.group),this.roadGraphics.beginFill(n.g.ROAD),this.roadGraphics.drawPolygon([this.topLeft,{x:this.roadOffsetLeft+this.roadWidthTop,y:this.topLeft.y},{x:this.roadOffsetLeft+this.roadWidthBottom,y:this.game.height},{x:this.roadOffsetLeft,y:this.game.height}]),this.roadGraphics.endFill(),this.drawRoadMarking()}return a(t,[{key:"update",value:function(t){var e=t.dayTime;if(e!==this.dayTime){this.dayTime=e;var i=255*this.dayTime,r=Phaser.Color.getColor(i,i,i);this.roadGraphics.tint=r,this.groundTile.tint=r}}},{key:"getProjection",value:function(t){var e=t.x,i=t.y,r=e/this.length,a=this.roadWidthTop-i/this.width*this.roadWidthTop;return{x:this.topLeft.x+a*(1+r*(this.mainRatio-1)),y:this.topLeft.y+Math.abs(r)*this.groundHeight,scale:(this.roadWidthTop+r*(this.roadWidthBottom-this.roadWidthTop))/this.lanes/n.f}}},{key:"getLaneCenter",value:function(t){return this.laneWidth*(.5+t)}},{key:"drawRoadMarking",value:function(){for(var t=this.laneWidth/15,e=t/2,i=10*t,r=3*i,n=this.game.add.group(),a=1;a<this.lanes;a++)for(var s=a*this.laneWidth,o=0;o<this.length;){var h=this.getProjection({x:o,y:s}),u=this.getProjection({x:o+i*h.scale,y:s}),l=this.game.add.graphics();l.beginFill(16777215,.8),l.drawPolygon([{x:h.x-e*h.scale,y:h.y},{x:h.x+e*h.scale,y:h.y},{x:u.x+e*u.scale,y:u.y},{x:u.x-e*u.scale,y:u.y}]),l.endFill(),n.add(l),o+=(i+r)*u.scale}n.cacheAsBitmap=!0,this.group.add(n)}}]),t}();e.a=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(6),a=i(4),s=i(1),o=i(0),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=120,l=70,c=function(){function t(e){var i=e.game,s=e.x,h=e.y,c=e.width,d=e.computing,g=e.speedLimit;r(this,t),this.game=i,this.width=c,this.height=u+l+4*o._7,this.speedLimit=g,this.radarGroup=this.game.add.group(),this.radarGroup.x=s,this.radarGroup.y=h-this.height,this.body=this.game.add.graphics(),this.body.beginFill(2434341),this.body.drawRoundedRect(0,0,this.width,this.height,20),this.body.endFill(),this.radarGroup.add(this.body),this.screenGroup=this.game.add.group(),this.screenGroup.x=o._7,this.screenGroup.y=2*o._7,this.radarGroup.add(this.screenGroup),this.screen=this.game.add.graphics(),this.screenGroup.add(this.screen),this.screenWidth=this.width-2*o._7,this.mainText=this.game.add.text(this.screenWidth/2,u/2+5,"",{align:"center",wordWrap:!0,wordWrapWidth:this.screenWidth}),this.mainText.font='"Press Start 2P", Arial',this.mainText.fontSize=18,this.mainText.anchor.set(.5,.5),this.screenGroup.add(this.mainText),this.topText=this.game.add.text(this.screenWidth/2,10,"",{align:"center"}),this.topText.font='"Press Start 2P", Arial',this.topText.fontSize=14,this.topText.fontVariant="small-caps",this.topText.anchor.set(.5,0),this.screenGroup.add(this.topText),this.bottomText=this.game.add.text(this.screenWidth/2,u-10,"",{align:"center"}),this.bottomText.font='"Press Start 2P", Arial',this.bottomText.fontSize=12,this.bottomText.anchor.set(.5,1),this.screenGroup.add(this.bottomText);var f=u/10;this.progressBar=new n.a({game:this.game,x:f,y:u-2*f-5,width:this.screenWidth-2*f,height:10,color:0}),this.screenGroup.add(this.progressBar.graphics);var p=this.width/1.5;this.fineButton=new a.a({game:this.game,name:o.I,x:(this.width-p)/2,y:this.height-l-o._7,width:p,height:l,bg:o.g.MAROON,text:this.game.rg.i18n.getTranslation(o.I),style:{font:"24px Arial",fontWeight:"bold",fill:"#fff"},radius:20}),this.radarGroup.add(this.fineButton.group),this.mode=null,this.computingTimer=this.game.time.create(!1),this.computingTimerDuration=d,this.temporaryModeTimer=this.game.time.create(!1),this.currentCar=null,this.currentFine=0,this.setMode(o.W)}return h(t,[{key:"update",value:function(){this.mode===o.U&&this.computingTimer.running&&this.progressBar.update({percent:this.computingTimer.ms/this.computingTimerDuration})}},{key:"handleCompleteComputing",value:function(){this.computingTimer.stop(!0),this.currentFine=Object(s.a)(this.currentCar.velocity.x,this.speedLimit),0===this.currentFine?this.setMode(o.V,{speed:this.currentCar.velocity.x}):this.setMode(o.Y,{speed:this.currentCar.velocity.x})}},{key:"handleCompleteTemporaryMode",value:function(){this.temporaryModeTimer.stop(!0),this.setMode(o.W)}},{key:"setMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(this.computingTimer.stop(!0),this.temporaryModeTimer.stop(!0),this.progressBar.graphics.visible=!1,this.topText.visible=!1,this.bottomText.visible=!1,this.mainText.fill="#000",this.topText.fill="#000",this.bottomText.fill="#000",this.fineButton.update({text:"..."}),t){case o.W:this.mainText.setText(this.game.rg.i18n.getTranslation(o.w)),this.resetCurrentCar();break;case o.V:this.topText.setText(this.currentCar.plateNumber.getText()),this.topText.visible=!0,this.mainText.setText(Math.round(e.speed)+" "+this.game.rg.i18n.getTranslation(o.z));break;case o.Y:this.topText.setText(this.currentCar.plateNumber.getText()),this.topText.visible=!0,this.mainText.setText(Math.round(e.speed)+" "+this.game.rg.i18n.getTranslation(o.z)),this.fineButton.reset();break;case o.U:this.currentCar=e.car,this.mainText.setText(this.game.rg.i18n.getTranslation(o.B)),this.progressBar.graphics.visible=!0,this.computingTimer.add(this.computingTimerDuration,this.handleCompleteComputing,this),this.computingTimer.start();break;case o.Z:this.topText.setText(this.currentCar.plateNumber.getText()),this.topText.visible=!0,this.mainText.setText(this.game.rg.i18n.getTranslation(o.y)+"\n"+this.currentFine+" "+this.game.rg.i18n.getTranslation(o.l)),this.resetCurrentCar(),this.startTemporaryModeTimer();break;case o._0:null!==this.currentCar&&(this.topText.setText(this.currentCar.plateNumber.getText()),this.topText.fill=o.h.MAROON,this.topText.visible=!0),this.mainText.fill=o.h.MAROON,this.mainText.setText(this.game.rg.i18n.getTranslation(o.A)),this.bottomText.setText(Object(s.b)(-this.currentFine,this.game.rg.i18n.getTranslation(o.l))),this.bottomText.fill=o.h.MAROON,this.bottomText.visible=!0,this.resetCurrentCar(),this.startTemporaryModeTimer();break;case o.T:this.mainText.setText(this.game.rg.i18n.getTranslation(o.v)),this.resetCurrentCar(),this.startTemporaryModeTimer();break;case o.X:this.mainText.fill=o.h.MAROON,this.mainText.setText(this.game.rg.i18n.getTranslation(o.x)),this.resetCurrentCar()}this.mode=t,this.drawScreen()}},{key:"drawScreen",value:function(){var t=void 0;switch(this.mode){case o.Y:case o._0:case o.X:t=o.g.RADAR_SCREEN_RED;break;default:t=o.g.RADAR_SCREEN}this.screen.clear(),this.screen.beginFill(t),this.screen.drawRect(0,0,this.screenWidth,u),this.screen.endFill()}},{key:"startTemporaryModeTimer",value:function(){this.temporaryModeTimer.add(2e3,this.handleCompleteTemporaryMode,this),this.temporaryModeTimer.start()}},{key:"resetCurrentCar",value:function(){this.currentCar=null,this.currentFine=0}}]),t}();e.a=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e){var i=e.game,n=e.x,a=e.y,s=e.position,o=e.speedLimit;r(this,t),this.group=i.add.group(),this.group.x=n,this.group.y=a,this.group.rg=this,this.position=new Phaser.Point(s.x,s.y),this.dayTime=null,this.signSprite=i.add.sprite(0,0,"roadSign"),this.signSprite.anchor.set(.5,1),this.group.add(this.signSprite),this.speedLimitText=i.add.text(0,-this.signSprite.height+this.signSprite.width/2+3,o,{align:"center"}),this.speedLimitText.font="Arial",this.speedLimitText.fontSize=o>99?24:30,this.speedLimitText.anchor.set(.5,.5),this.group.add(this.speedLimitText)}return n(t,[{key:"update",value:function(t){var e=t.dayTime;if(e!==this.dayTime){this.dayTime=e;var i=255*this.dayTime;this.signSprite.tint=Phaser.Color.getColor(i,i,i)}}}]),t}();e.a=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(6),a=i(1),s=i(0),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(e){var i=e.game,a=e.x,s=e.y,o=e.score,h=void 0===o?0:o,u=e.goal;r(this,t),this.game=i,this.value=h,this.goal=u,this.group=this.game.add.group(),this.group.x=a,this.group.y=s,this.progressBar=new n.a({game:this.game,x:0,y:0,width:this.game.width/3,height:10,color:16777215,radius:5}),this.group.add(this.progressBar.graphics),this.scoreTextFontStyle={font:'16px "Press Start 2P", Arial',fill:"#fff"},this.scoreText=this.game.add.text(0,2*this.progressBar.height,"",this.scoreTextFontStyle),this.group.add(this.scoreText),this.updateText=this.game.add.text(0,this.scoreText.bottom,"",this.scoreTextFontStyle),this.group.add(this.updateText),this.updateTextTween=null,this.updateValue(0)}return o(t,[{key:"update",value:function(){this.progressBar.update({percent:this.value/this.goal})}},{key:"updateValue",value:function(t){this.value+=t,this.scoreText.setText(Object(a.b)(this.value,this.game.rg.i18n.getTranslation(s.l))),0!==t&&(this.updateText.setText((t>0?"+ ":"- ")+Object(a.b)(Math.abs(t),this.game.rg.i18n.getTranslation(s.l))),this.updateText.fill=t>0?s.h.YELLOW:s.h.RED,this.updateText.alpha=1,this.updateTextTween&&this.updateTextTween.stop(),this.updateTextTween=this.game.add.tween(this.updateText).to({alpha:0},2e3),this.updateTextTween.start())}},{key:"reachedGoal",get:function(){return this.value>=this.goal}}]),t}();e.a=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(1),a=i(0),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){var i=e.game,n=e.x,s=void 0===n?i.width-a._7:n,o=e.y,h=void 0===o?a._7:o,u=e.duration;r(this,t),this.game=i,this.duration=u,this.timer=this.game.time.create(),this.timer.loop(Phaser.Timer.SECOND,this.updateTimer,this),this.secondsElapsed=0,this.textTimer=this.game.add.text(s,h,""),this.textTimer.font='"Press Start 2P", Arial',this.textTimer.fontSize=20,this.textTimer.fill="#fff",this.textTimer.anchor.set(1,0),this.textTimer.setShadow(2,2,"rgba(0, 0, 0, .8)",0)}return s(t,[{key:"updateTimer",value:function(){this.secondsElapsed++;var t=this.duration-this.secondsElapsed;t<10&&(this.textTimer.fill=a.h.RED),this.textTimer.setText(Object(n.c)(t))}},{key:"start",value:function(){this.timer.start()}},{key:"kill",value:function(){this.timer.stop(!0)}},{key:"isExpired",get:function(){return this.secondsElapsed>=this.duration}},{key:"elapsedPercent",get:function(){return Math.min(1,this.timer.seconds/this.duration)}}]),t}();e.a=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(7),o=i(8),h=i(4),u=i(1),l=i(0),c=function(){function t(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),g=function t(e,i,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},f=function(t){function e(t){var i=t.game,a=t.height;r(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{game:i,height:a}));s.textTitle=s.game.add.text(s.width/2,20,"",{font:"26px Arial",fontWeight:"bold"}),s.textTitle.anchor.set(.5,0),s.contentGroup.add(s.textTitle),s.rules=new o.a({game:s.game,x:40,y:s.height/2-30,style:{font:'16px "Press Start 2P", Arial'},lineSpacing:Math.round(Math.max(20,s.height/20)),columnSpacing:40}),s.contentGroup.add(s.rules.group);return s.playButton=new h.a({game:s.game,name:l.K,x:(s.width-40)/2-140,y:s.height-20-40,width:140,height:40,bg:l.g.GREEN,text:s.game.rg.i18n.getTranslation(l.K)}),s.contentGroup.add(s.playButton.group),s.quitButton=new h.a({game:s.game,name:l.L,x:(s.width+40)/2,y:s.height-20-40,width:140,height:40,bg:16777215,text:s.game.rg.i18n.getTranslation(l.L),style:{font:"20px Arial",fill:l.h.MAROON}}),s.contentGroup.add(s.quitButton.group),s}return a(e,t),d(e,[{key:"handleOverlayTweenComplete",value:function(t,i,r){var n=this,a=r.levelNumber,s=r.goal,o=r.series;this.textTitle.setText(this.game.rg.i18n.getTranslation(l.N)+" "+a);var h=[[[l.D],[Object(u.b)(s,this.game.rg.i18n.getTranslation(l.l))]],[[l.C],[o.join(", "),l.h.RED]]];this.rules.setText(h.map(function(t){var e=c(t,2),i=e[0],r=e[1];return[[n.game.rg.i18n.getTranslation(i[0])+":",i[1]],r]})),g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handleOverlayTweenComplete",this).call(this)}}]),e}(s.a);e.a=f},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(7),o=i(4),h=i(8),u=i(1),l=i(0),c=function(){function t(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),g=function t(e,i,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},f=function(t){function e(t){var i=t.game,a=t.height;r(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{game:i,height:a}));s.textMode=s.game.add.text(s.width/2,20,"",{font:"26px Arial",fontWeight:"bold"}),s.textMode.anchor.set(.5,0),s.contentGroup.add(s.textMode),s.stats=new h.a({game:s.game,x:40,y:s.textMode.bottom+Math.max(20,s.height/14),style:{font:'16px "Press Start 2P", Arial'},lineSpacing:Math.round(Math.max(10,s.height/27)),columnSpacing:80}),s.contentGroup.add(s.stats.group);return s.nextButton=new o.a({game:s.game,name:l.J,x:(s.width-40)/2-140,y:s.height-20-40,width:140,height:40,bg:l.g.GREEN,text:s.game.rg.i18n.getTranslation(l.J)}),s.contentGroup.add(s.nextButton.group),s.replayButton=new o.a({game:s.game,name:l.M,x:(s.width-40)/2-140,y:s.height-20-40,width:140,height:40,bg:l.g.GREEN,text:s.game.rg.i18n.getTranslation(l.M)}),s.contentGroup.add(s.replayButton.group),s.quitButton=new o.a({game:s.game,name:l.L,x:(s.width+40)/2,y:s.height-20-40,width:140,height:40,bg:16777215,text:s.game.rg.i18n.getTranslation(l.L),style:{font:"20px Arial",fill:l.h.MAROON}}),s.contentGroup.add(s.quitButton.group),s}return a(e,t),d(e,[{key:"handleOverlayTweenComplete",value:function(t,i,r){var n=this,a=r.mode,s=r.stats,o=r.nextLevel;this.textMode.fill=a===l.j?l.h.GREEN:l.h.MAROON,this.textMode.setText(this.game.rg.i18n.getTranslation(a===l.j?l.n:l.m));var h=[[l.E,s.fines],[l.H,s.wrong,l.h.RED],[l.F,s.missed]].map(function(t){var e=c(t,3),i=e[0],r=e[1],a=r.count,s=r.sum,o=e[2];return[i,0===s?String(a):a+" ("+Object(u.b)(s,n.game.rg.i18n.getTranslation(l.l))+")",o]});a===l.j&&h.unshift([l.G,String(Object(u.c)(s.time))]),this.stats.setText(h.map(function(t){var e=c(t,3),i=e[0],r=e[1],a=e[2];return[[n.game.rg.i18n.getTranslation(i)+":",a],[r,a]]})),a===l.j&&null!==o?(this.nextButton.group.visible=!0,this.replayButton.group.visible=!1):(this.nextButton.group.visible=!1,this.replayButton.group.visible=!0),g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handleOverlayTweenComplete",this).call(this)}}]),e}(s.a);e.a=f},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(0),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(){function t(e){var i=e.game;r(this,t),this.game=i,this.graphics=this.game.add.graphics(),this.graphics.name=n.P,this.graphics.drawRect(0,0,this.game.width,this.game.height),this.graphics.inputEnabled=!0,this.text=this.game.add.text(this.game.width/2,this.game.height/2,this.game.rg.i18n.getTranslation(n.P),{font:'28px "Press Start 2P", Arial',fill:"#fff"}),this.text.anchor.set(.5),this.text.setShadow(4,4,"rgba(0, 0, 0, .8)",0),this.graphics.addChild(this.text),this.kill()}return a(t,[{key:"revive",value:function(){this.graphics.revive()}},{key:"kill",value:function(){this.graphics.kill()}}]),t}();e.a=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(0),a=function(){function t(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=400,h=[[25500,400],[5e4,500]],u=100,l=function(){function t(e){var i=e.game,a=e.weather,s=e.road,h=e.bgGroup,l=e.onFlash;if(r(this,t),this.game=i,this.weather=a,this.road=s,this.onFlash=l,this.isFlash=!1,this.flashTimers=[],this.rainSkyCurtain=null,this.curtains=[],this.weather===n._8)for(var c=0;c<this.road.length;){var d=this.createFogCurtain(c);this.curtains.push(d),c+=u}else if(this.weather===n._9){this.rainSkyCurtain=this.game.add.graphics(),this.drawRainSky(),h.add(this.rainSkyCurtain);for(var g=0;g<=this.road.length;){g+=o;var f=this.createRainCurtain(g);this.curtains.push(f)}}}return s(t,[{key:"update",value:function(){this.isFlash&&this.flashTimers.every(function(t){var e=a(t,3),i=e[0],r=e[1],n=e[2];return i.duration<r-n})&&(this.isFlash=!1,this.handleFlashEnd())}},{key:"handleFlashStart",value:function(){this.isFlash||this.drawRainSky(n.g.FLORAL_WHITE,1),this.isFlash=!0,this.onFlash(!0)}},{key:"handleFlashEnd",value:function(){this.drawRainSky(),this.onFlash(!1)}},{key:"createFogCurtain",value:function(t){var e=this.game.add.graphics();return e.rg={position:new Phaser.Point(t,0)},e.beginFill(n.g.STEEL,.3),e.drawRect(0,0,this.game.width,this.road.getProjection({x:t,y:0}).y),e.endFill(),e}},{key:"createRainCurtain",value:function(t){var e=this.road.getProjection({x:t,y:0}),i=this.game.add.tileSprite(0,-10,this.game.width,e.y,"rain");return i.tileScale.set(e.scale),this.game.add.tween(i.tilePosition).to({y:256},300*i.tileScale.y,null,!0,0,-1),i.rg={position:new Phaser.Point(t,0)},i}},{key:"drawRainSky",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.STEEL,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8;this.rainSkyCurtain.beginFill(t,e),this.rainSkyCurtain.drawRect(0,0,this.game.width,this.road.topLeft.y),this.rainSkyCurtain.endFill()}},{key:"startFlashTimers",value:function(){var t=this;this.weather===n._9&&(this.flashTimers=h.map(function(e){var i=a(e,2),r=i[0],n=i[1],s=t.game.time.create(!1);return s.loop(r,t.handleFlashStart,t),s.start(),[s,r,n]}))}}]),t}();e.a=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(0),a=i(1),s=function(){function t(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function(){function t(e){var i=e.game,n=e.height,a=e.dayTime;r(this,t),this.game=i,this.height=n,this.dayTime=a,this.graphics=this.game.add.graphics(),this.drawSky(this.dayTime)}return o(t,[{key:"update",value:function(t){var e=t.dayTime;e!==this.dayTime&&(this.dayTime=e,this.drawSky(this.dayTime))}},{key:"drawSky",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=t.getSkyColorByDayTime(e);this.graphics.beginFill(i),this.graphics.drawRect(0,0,this.game.width,this.height),this.graphics.endFill()}}],[{key:"getSkyColorByDayTime",value:function(t){var e=void 0,i=void 0,r=void 0;if(0===t)return 0;for(var o=1;o<n._1.length;o++){var h=s(n._1[o],2),u=h[0],l=h[1];if(t>l)return e=n._1[o-1][0],i=u,r=(t-n._1[o-1][1])/(l-n._1[o-1][1]),Object(a.d)(e,i,r)}return n._1[0][0]}}]),t}();e.a=h},function(t,e,i){t.exports=i.p+"assets/15a300a93c7c5b6cdeb6ce10aba12236.png"}]);